<% if defined? params[:date]&& params[:date] != nil %>

<% @time= params[:start_time].to_time %>
<div class="grid grid-cols-5 gap-2">
<% while @time < params[:end_time].to_time do %>
    
       <% @slot_start_time = @time %>
       <% @slot_end_time = (@time+60*params[:duration].to_i).to_time %><br>
     
        
          
      
                    <% if Order.where("date == ?  AND cart == false AND ((start_time == ?) OR (start_time BETWEEN ? AND ? AND start_time != ?) OR (end_time BETWEEN ? AND ? AND end_time != ?)) ", params[:date],@slot_start_time,@slot_start_time,@slot_end_time,@slot_end_time,@slot_start_time,@slot_end_time,@slot_start_time).length == 0 %>
                         
                          <td><button type="button" class="bg-green-500 hover:bg-green-700 text-white text-center py-1 px-2 rounded"  onclick="settime('<%= @slot_start_time %>','<%= @slot_end_time %>')" ><%= @slot_start_time.strftime("%I:%M%p")%>to<%= @slot_end_time.strftime("%I:%M%p") %></button>
                 
                    <% else %> 
                                
                          <button type="button" class="bg-red-500 hover:bg-red-700 text-white text-center py-2 px-4 rounded"  disabled ><%= @slot_start_time.strftime("%I:%M%p")%>to<%= @slot_end_time.strftime("%I:%M%p") %></button> 
                 
                    <% end %> 

                  
        
              
    

      

        <% @time = @slot_end_time %>
      




<% end %>
  </div>


<% end %>